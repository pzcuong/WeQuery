<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Bootstrap Example</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <meta charset="utf-8">
        <title>Thêm câu hỏi</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <div class="form">
            <h1>Thêm câu hỏi</h1>
            <form action="/" method="POST" id="formElem">
                <input type="text" name="Ten" placeholder="Tên câu hỏi" required />
                <input type="text" name="Loai" placeholder="Loại câu hỏi (Dễ, Trung bình, Khó)" required />
                <textarea name="NoiDung" placeholder="Nội dung câu hỏi" required >  </textarea>
                <input type="text" name="LuocDo" placeholder="Lược đồ (up link ảnh)" required />
                <input type="text" name="SampleInput" placeholder="Input mẫu (up link ảnh)" required />
                <input type="text" name="SampleOutput" placeholder="Output mẫu (up link ảnh)" required />

                <button onclick="login()" type="button" class="btn btn-success">
                    Submit
                </button>
            </form>
        </div>

        <script>
            async function login() {
                var form = document.querySelector("#formElem");
            
                data = {
                    Ten: form.querySelector("input[name=Ten]").value,
                    Loai: form.querySelector("input[name=Loai]").value,
                    NoiDung: form.querySelector("textarea[name=NoiDung]").value,
                    LuocDo: form.querySelector("input[name=LuocDo]").value,
                    SampleInput: form.querySelector("input[name=SampleInput]").value,
                    SampleOutput: form.querySelector("input[name=SampleOutput]").value,
                };

                let response = await fetch('/admin/ThemCauHoi', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data),
                        json: true
                })

                let text = await response.json(); 
                setCookie("x_authorization", text.accessToken);
                console.log(text)
                //document.querySelector("#encoded").innerHTML = text.message;
                //window.open(text.captcha_url, "mywindow","menubar=1,resizable=1,width=350,height=250").focus();
            };

            function setCookie(name,value) {
                document.cookie = name + "=" + value + ";; path=/";
            }
        </script>

    </body>
</html>